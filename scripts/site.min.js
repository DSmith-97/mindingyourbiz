function w3_open(){document.getElementById("mySidebar").style.display="block",document.getElementById("myOverlay").style.display="block"}function w3_close(){document.getElementById("mySidebar").style.display="none",document.getElementById("myOverlay").style.display="none"}function showName(e){var t=e.children[0].src;$("#sample").modal("show");var a="<img src='"+t+"' >";$(".modal-body").empty(),$(".modal-body").append(a),console.log("imgElement : "+t)}function updateDataStore(e){$.ajax({url:"https://api.myjson.com/bins/7i1p8",type:"PUT",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e,t,a){}})}function accessDataStore(e){var t;$.ajax({url:"https://api.myjson.com/bins/7i1p8",method:"Get",success:function(e){t=e},complete:function(){performDataAction(t,e)}})}function performDataAction(e,t,a){switch(t){case"getEmailAddressList":getEmailAddressList(e);break;case"addNewContact":addNewContact(e);break;case"addSubscriberEmail":addSubscriberEmail(e);break;case"submitBusiness":submitBusiness(e)}}function getEmailAddressList(e){e.subscriberList}function addNewContact(e){var t=e.contactList,a=$("input[name='Name']").val(),s=$("input[name='Email']").val(),n=$("#comment_text").val(),i={name:a,email:s,message:n};if(""!=a&&""!=s&&""!=s){t.push(i),updateDataStore(e);a=$("input[name='Name']").val(""),s=$("input[name='Email']").val(""),n=$("input[name='Message']").val("");$(".success-alert").show(),$(".success-alert").fadeOut(5e3),$(".w3-input").val("")}else $(".fail-alert").show(),$(".fail-alert").fadeOut(3e3),$(".w3-input").val("")}function submitBusiness(e){var t=e.newBusinessList,a=$("input[name='businessOwnerName']").val(),s=$("input[name='businessOwnerContactNumber']").val(),n=$("input[name='businessOwnerContactEmail']").val(),i=$("input[name='businessName']").val(),o=$("input[name='businessType']").val(),c=$("input[name='businessCity']").val(),u=$("#businessState").val(),r=$("input[name='businessContactable']:checked").val(),m=$("#businessComment").val();if(1==(""!=a&&""!=s&&""!=n&&""!=i&&""!=o&&""!=c&&""!=u&&""!=m)){var l={businessOwnerName:a,businessOwnerContactNumber:s,businessOwnerContactEmail:n,businessName:i,businessType:o,businessCity:c,businessState:u,businessContactable:r,businessComment:m,active:!0};t.push(l),updateDataStore(e),$(".recommendText").show(),$(".recommendText").fadeOut(5e3),$("#businessComment").val(""),$(".w3-input").val("")}else $(".recommendTextFailed").show(),$(".recommendTextFailed").fadeOut().delay(5).fadeIn().delay(5).fadeOut().delay(5).fadeIn().delay(5).fadeOut().delay(5),$("#businessComment").val(""),$(".w3-input").val("")}function addSubscriberEmail(e){var t=e.subscriberList,a=$(".newEmailSubscriber").val().trim();if(""!=a&&a.indexOf("@")>-1){t.push(a);var s=t;e.subscriberList=s,updateDataStore(e),$(".beforeSub").hide(),$(".subscribeSubmit").hide(),$(".afterSub").fadeIn(),setTimeout(function(){$(".newEmailSubscriber").val(""),document.getElementById("subscribe").style.display="none",$(".beforeSub").show(),$(".subscribeSubmit").show(),$(".afterSub").hide()},2e3)}else alert("Please enter a valid email address")}function showDonate(){$("#donate").css("visibility","visible")}function getDataStore(){var e;$.ajax({url:"https://api.myjson.com/bins/7i1p8",method:"Get",success:function(t){e=t},complete:function(){addNewVisitor(e)}})}function addNewVisitor(e){var t=e.visitorList;$.ajax({url:"http://ip-api.com/json",method:"Get",success:function(a){var s,n;n={city:(s=a).city,country:s.country,countryCode:s.countryCode,isp:s.isp,org:s.org,ip:s.query,region:s.region,regionName:s.regionsName,timezone:s.timezone,zip:s.zip,platform:navigator.platform,browser:navigator.vendor,time:new Date((new Date).toUTCString()).toLocaleString()},t.push(n),updateData(e)}})}function updateData(e){$.ajax({url:"https://api.myjson.com/bins/7i1p8",type:"PUT",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e,t,a){console.log(t)}})}$("#getEmail").on("click",function(){accessDataStore("getEmailAddressList")}),$(".sendContact").on("click",function(){accessDataStore("addNewContact")}),$(".subscribeSubmit").on("click",function(){accessDataStore("addSubscriberEmail")}),$(".contactLink").on("click",function(){$("#contact").show()}),$(".submitBusiness").on("click",function(){accessDataStore("submitBusiness")}),getDataStore();
